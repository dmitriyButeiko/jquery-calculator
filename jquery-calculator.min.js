!function($){function customizeContainer(a){a.css({"background-color":"black",width:"300px",height:"530px"})}function addKey(a,b){var c;switch(b){case"backspace":c=$('<div class="key"><span><img src="calculator/img/backspaceIcon2.png"></img></span></div>'),c.find("img").css({width:"35px",padding:"0px",display:"inline-block","padding-top":"14px","margin-right":"4px"}),c.css({position:"relative",top:"6.1px"});break;default:c=$('<div class="key"><span>'+b+"</span></div>"),c.find("span").css({display:"inline-block","padding-top":"4.5px"})}c.css({"background-color":"white",display:"inline-block","font-size":"40px","max-width":"60px","margin-top":"10px","margin-bottom":"0px","min-width":"60px","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","user-select":"none","margin-left":"10px","line-height":"-20px","max-height":"60px","min-height":"60px","text-align":"center","font-family":"Roboto, sans-serif","border-radius":"20px"}),c.find("span").hover(function(){$(this).css({cursor:"default"})}),a.append(c)}function addKeys(a){addKey(a,"C"),addKey(a,"%"),addKey(a,"X"),addKey(a,"backspace"),addKey(a,"7"),addKey(a,"8"),addKey(a,"9"),addKey(a,"-"),addKey(a,"4"),addKey(a,"5"),addKey(a,"6"),addKey(a,"+"),addKey(a,"1"),addKey(a,"2"),addKey(a,"3"),addKey(a,"()"),addKey(a,"0"),addKey(a,"."),addKey(a,"+/-"),addKey(a,"=")}function isLastNumberPositive(a){console.log("First Changing");for(var b=a.length-1;b>-1;b--)switch(a[b]){case"+":return!0;case"-":return"("!=a[b-1];case"%":return!0;case"X":return!0}return!0}function changeLastNumberToPositive(a){for(var b=a,c=b.length-1;c>0&&"-"!=b[c];c--);console.log("First Changing"),openBraceNesting--;var d=b.substr(0,c-1),e=b.substr(c+1,b.length);return b=d+e}function createPanels(a){var b=$('<div id="displayPanel"></div>');b.css({width:"100%",height:"30%",background:"black","font-family":"'Sigmar One', cursive","font-size":"2em","word-wrap":"break-word",color:"white","overflow-y":"auto"});var c=$('<div id="keysPanel"></div>');c.css({width:"100%",height:"70%",background:"green","font-size":"0"}),addKeys(c),a.append(b),a.append(c)}function addClickEffect(){var a=container.find("#keysPanel");a.mouseover(function(){$(this).find(".key").mousedown(function(){$(this).css({"background-color":"red"})}),$(this).find(".key").mouseup(function(){$(this).css({"background-color":"white"}),updateDisplay.call(this)})}),a.mouseout(function(){$(this).find(".key").unbind("mousedown"),$(this).find(".key").unbind("mouseup")})}function changeLastNumberToNegative(a){for(var b=a,c=!1,d=b.length-1;d>-1;d--){switch(b[d]){case"-":case"+":case"X":case"%":case"(":c=!0}if(c)break}openBraceNesting++;var e=b.substr(0,d+1),f="(-",g=b.substr(d+1),h=e+f+g;return h}function addHandlers(){addClickEffect()}function lastNumberAvailability(a){switch(a[a.length-1]){case"+":case"-":case"%":case"X":case"(":case")":return!1;default:return""!=a}}function clearDisplay(a){equalsUsed=!1,openBraceNesting=0,a.text("")}function checkDotPossibility(a){var b=a.text(),c=b.length;switch(b[c-1]){case"+":return!1;case"-":return!1;case".":return!1;case"X":return!1;case"%":return!1;case"(":return!1;case")":return!1;default:return""!=b}}function prepareText(a){var b=a.replace("X","*");return b=b.replace("%","/")}function checkOpenBracePossibility(a){var b=a.text(),c=b.length;switch(b[c-1]){case"+":return!0;case"-":return!0;case"X":return!0;case"%":return!0;case"(":return!0;default:return""==b}}function checkCloseBracePossibility(a){var b=a.text(),c=b.length;switch(b[c-1]){case"+":return!1;case"-":return!1;case"X":return!1;case"(":return!1;case"%":return!1;default:return!0}}function checkCharacterPossibility(a){var b=a.text(),c=b.length;switch(b[c-1]){case"+":return!1;case"-":return!1;case"X":return!1;case"%":return!1;default:return""!=b}}function updateDisplay(){var display=container.find("#displayPanel");switch($(this).text()){case"":equalsUsed&&clearDisplay(display);var displayText=display.text();")"==displayText[displayText.length-1]&&(console.log("Nesting++"),openBraceNesting++),"("==displayText[displayText.length-1]&&(console.log("Nesting--"),openBraceNesting--),display.text(display.text().substr(0,display.text().length-1));break;case"()":openBraceNesting?checkOpenBracePossibility(display)?(display.text(display.text()+"("),openBraceNesting++):(display.text(display.text()+")"),openBraceNesting--):checkOpenBracePossibility(display)&&(display.text(display.text()+"("),openBraceNesting++);break;case"C":clearDisplay(display);break;case"-":checkCharacterPossibility(display)&&display.text(display.text()+$(this).text());break;case"+":checkCharacterPossibility(display)&&display.text(display.text()+$(this).text());break;case"X":checkCharacterPossibility(display)&&display.text(display.text()+$(this).text());break;case"%":checkCharacterPossibility(display)&&display.text(display.text()+$(this).text());break;case".":checkDotPossibility(display)&&display.text(display.text()+$(this).text());break;case"+/-":if(equalsUsed&&clearDisplay(display),lastNumberAvailability(display.text()))if(console.log("Available"),isLastNumberPositive(display.text())){console.log("Available Positive");var text=changeLastNumberToNegative(display.text());display.text(text)}else{console.log("Negative");var text=changeLastNumberToPositive(display.text());display.text(text)}else console.log("Not Available");break;case"=":try{var text=display.text();text=prepareText(text);var res=eval(text);display.text(display.text()+"="+res),equalsUsed=!0}catch(e){console.log("Wrong Format")}break;default:var displayText=display.text();")"!=displayText[displayText.length-1]&&display.text(display.text()+$(this).text())}}function addUI(){customizeContainer(container),createPanels(container)}function init(a){container=this,addUI(),addHandlers()}$.fn.calculator=init;var container={},openBraceNesting=0,equalsUsed=!1}(jQuery);